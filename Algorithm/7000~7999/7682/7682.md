# [7682](https://www.acmicpc.net/problem/7682)

## 틱택토

### 문제

---

틱택토 게임은 두 명의 사람이 번갈아가며 말을 놓는 게임이다. 게임판은 3×3 격자판이며, 처음에는 비어 있다. 두 사람은 각각 X 또는 O 말을 번갈아가며 놓는데, 반드시 첫 번째 사람이 X를 놓고 두 번째 사람이 O를 놓는다. 어느 때든지 한 사람의 말이 가로, 세로, 대각선 방향으로 3칸을 잇는 데 성공하면 게임은 즉시 끝난다. 게임판이 가득 차도 게임은 끝난다.

게임판의 상태가 주어지면, 그 상태가 틱택토 게임에서 발생할 수 있는 최종 상태인지를 판별하시오.

### 입력

---

입력은 여러 개의 테스트 케이스로 이루어져 있다. 각 줄은 9개의 문자를 포함하며, 'X', 'O', '.' 중 하나이다. '.'은 빈칸을 의미하며, 9개의 문자는 게임판에서 제일 윗 줄 왼쪽부터의 순서이다. 입력의 마지막에는 문자열 "end"가 주어진다.

### 출력

---

각 테스트 케이스마다 한 줄에 정답을 출력한다. 가능할 경우 "valid", 불가능할 경우 "invalid"를 출력한다.

## 코드

```c++
#include<iostream>
#include<string>
using namespace std;
int main(){
    string input;
    char TTT[3][3];
    while(1){
        int OCnt=0, XCnt=0;
        bool XWin = false, OWin = false, isValid = false;
        cin>>input;
        if(input[0]=='e') break;
        for(int i=0;i<9;i++){
            if(input[i] == 'O') OCnt++;
            else if(input[i] == 'X') XCnt++;
            TTT[i/3][i%3]=input[i];
        }
        for(int i=0;i<3;i++){
            // 가로 빙고
            if(TTT[i][0] == TTT[i][1] && TTT[i][1] == TTT[i][2])
                if(TTT[i][0]=='X')        XWin = true;
                else if(TTT[i][0]=='O')    OWin = true;
            // 세로 빙고
            if(TTT[0][i] == TTT[1][i] && TTT[1][i] == TTT[2][i])
                if(TTT[0][i]=='X')        XWin = true;
                else if(TTT[0][i]=='O')    OWin = true;
        }
        // 대각선 빙고
        if((TTT[0][0]==TTT[1][1] && TTT[1][1] == TTT[2][2]) || 
            (TTT[0][2]==TTT[1][1] && TTT[1][1] == TTT[2][0]))
            if(TTT[1][1]=='X')        XWin = true;
            else if(TTT[1][1]=='O')    OWin = true;
        // x가 승리 && O보다 X가 1개 더 많음
        if(XWin && !OWin && XCnt==OCnt+1)               isValid = true;
        // O가 승리 && O와 X가 같음
        else if(!XWin && OWin && XCnt==OCnt)            isValid = true;
        // 둘다 못이김 && 순서에 맞게 동작
        else if(!XWin && !OWin && XCnt==5 && OCnt==4)   isValid = true;
        isValid?cout<<"valid\n":cout<<"invalid\n";
    }
    return 0;
}
```

## 풀이

구현 문제

처음에는 만들어진 모든 빙고에 대해 파악하며 불가능한 경우를 하나하나 빼내는식으로 수행하려 했으나, 안되는 경우가 되는 경우보다 더 많아서.. 되는 경우를 파악하는 식으로 접근해 풀이했다.  
무조건 `X`가 먼저 두는것을 시작으로, `X`와 `O`를 번갈아 두며, 게임에서 이기는 조건은 X나 O가 가로, 세로, 대각선 방향으로 3칸을 잇는 데 성공하는 것, 누군가 이긴다면 게임은 종료되고, 게임판이 가득 차도 게임은 종료된다.  
이때, 최종 상태에서 만들어질 수 있는 경우는 다음과 같다

1. X 승리
2. O 승리
3. 누구도 이기지 못하고, 바둑판이 가득 참

X가 승리한 경우, X의 갯수는 O보다 1개 더 많아야하며(번갈아 두기 때문), O로 이루어진 틱택토는 존재해선 안된다.  
또한, 가로 틱택토나, 세로 틱택토가 2개 이상 존재해선 안된다(가로 세로 1개씩, 가로 or 세로 + 대각선 틱택토의 경우는 가능).  

O가 승리한경우, O의 갯수는 X와 같아야하며, X로 이루어진 틱택토는 존재해선 안된다.  
또한, 가로 틱택토나, 세로 틱택토가 2개 이상 존재해선 안된다(가로 세로 1개씩, 가로 or 세로 + 대각선 틱택토의 경우는 가능).  

마지막으로, 누구도 승리하지 못한 채 바둑판이 가득 찬 경우 X나 O 중 어느것도 틱택토가 발생해선 안되며, X가 5개, O가 4개인 경우만 발생 가능하다.  

위 조건을 모두 구현해, 입력되는 테스트케이스에 대한 성립여부를 출력한다.  
