# [15990](https://www.acmicpc.net/problem/15990)

> __1, 2, 3 더하기 5__
>
> 정수 4를 1, 2, 3의 합으로 나타내는 방법은 총 3가지가 있다. 합을 나타낼 때는 수를 1개 이상 사용해야 한다. 단, 같은 수를 두 번 이상 연속해서 사용하면 안 된다.  
>
> - 1+2+1  
> - 1+3  
> - 3+1  
> 정수 n이 주어졌을 때, n을 1, 2, 3의 합으로 나타내는 방법의 수를 구하는 프로그램을 작성하시오.  

## 코드

```c++
#include <iostream>
#define MAX 100002
#define DIV 1000000009
using namespace std;
typedef unsigned int ui;
ui ansCnt[MAX][4]={0,};
int main(){
    ios::sync_with_stdio(false);
    cin.tie(NULL); cout.tie(NULL);
    int t,n;
    ui answer=0;
    for(int i=1;i<=3;i++) ansCnt[i][i]=1;
    for(int i=1;i<=MAX;i++){
    // 규칙
    // 마지막 수가 1로 끝나는 경우 -> +2, +3 함으로써 다음 수의 경우에 누적 가능
    // 마지막 수가 2로 끝나는 경우 -> +1, +3 함으로써 다음 수의 경우에 누적 가능
    // 마지막 수가 3로 끝나는 경우 -> +1, +2 함으로써 다음 수의 경우에 누적 가능
        if(i+1<MAX){
            ansCnt[i+1][1] = (ansCnt[i+1][1] + ansCnt[i][2])%DIV;
            ansCnt[i+1][1] = (ansCnt[i+1][1] + ansCnt[i][3])%DIV;
        }
        if(i+2<MAX){
            ansCnt[i+2][2] = (ansCnt[i+2][2] + ansCnt[i][1])%DIV;
            ansCnt[i+2][2] = (ansCnt[i+2][2] + ansCnt[i][3])%DIV;
        }
        if(i+3<MAX){
            ansCnt[i+3][3] = (ansCnt[i+3][3] + ansCnt[i][1])%DIV;
            ansCnt[i+3][3] = (ansCnt[i+3][3] + ansCnt[i][2])%DIV;
        }
    }
    cin>>t;
    while(t--){
        answer = 0;
        cin>>n;
        for(int i=1;i<=3;i++)
            answer = (answer + ansCnt[n][i])%DIV;
        cout<<answer<<"\n";
    }
    return 0;
}
```

## 풀이

dynamic programming을 활용한 문제.

문제에서 가장 핵심적인 조건은, 2개 이상의 수를 연속으로 사용할 수 없다는 것.  
따라서, 특정 수를 구성할 때 마지막으로 더한 수를 고려해 DP 배열을 구성하면 된다.  

100,000개의 수를 추적할 배열과, 각 숫자당 3개의 배열 칸을 만들어 100,000 x 3 크기의 2차원 배열을 구성한다.  
각 숫자마다 3칸의 배열은 특정 수열의 합이 해당하는 숫자를 나타낼 때, 마지막 값이 1,2,3인 경우의 수를 의미한다.  

1,2,3의 경우, 각 수를 하나만 사용해 숫자를 만들 수 있는 경우가 존재하므로 배열의 초기값을 1로 설정해준다.  
이후, 1부터 범위끝까지 반복적으로 돌며 다음 숫자의 경우의 수를 채워나간다.  

- 만일 1로 끝난 수열인경우, 2와 3이 다음 값으로 올 수 있으니 +2,+3번째 값의 2,3번 배열에 값을 누적해준다.  
- 만일 2로 끝난 수열인경우, 1와 3이 다음 값으로 올 수 있으니 +1,+3번째 값의 1,3번 배열에 값을 누적해준다.  
- 만일 3로 끝난 수열인경우, 1와 2이 다음 값으로 올 수 있으니 +1,+2번째 값의 1,2번 배열에 값을 누적해준다.  

위 과정을 반복하는 동안, 반복적으로 1,000,000,009 값의 나머지 연산을 해준다.  
배열 구성이 종료되면, 이는 1,2,3을 활용해 수를 나타내는 모든 경우를 구성한것이므로, t번의 테스트케이스동안 반복하며 배열의 값을 출력해준다.  
이때, 1,2,3번 칸의 값을 모두 합친 후 나며지 연산을 진행한 값을 출력해야 함을 주의하자.
